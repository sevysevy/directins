<?xml version="1.0" encoding="utf-8"?>
<odoo>


    <record id="view_move_form_assured" model="ir.ui.view">
        <field name="name">account.move.form</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref ="account.view_move_form"/>  
        <field name="arch" type="xml">
            <xpath expr="//group" position="before">
                <group name="Type d'assurance" string="Type d'assurance">
                    <field name="assurance_type" class="oe_inline"/>
                </group> 
            </xpath>
            <xpath expr ="//field[@name='partner_id']" position="after">
                <field name="num_compte" invisible="1"/>
                <field name="assured"/>   
            </xpath>
            <xpath expr ="//field[@name='payment_reference']" position="replace">
                
            </xpath>
            <xpath expr ="//field[@name='partner_id']" position="replace">
                <field name="partner_id" string="Souscripteur"/> 
            </xpath>

            <!-- information du véhicule -->


            <xpath expr ="//notebook" position="before">
              <group name="véhicule" string="informations du vehicule" attrs = "{'invisible': [('assurance_type','=','maladie')], 'required':[('assurance_type','=','auto' )] }">
                    <group id="right_group">
                        <div class="o_td_label">
                            <label for="car_brand"  style="font-weight:bold;" />
                        </div>
                        <field name="car_brand" nolabel="1" />

                        <div class="o_td_label">
                            <label for="car_immatriculation"  style="font-weight:bold;" />
                        </div>
                        <field name="car_immatriculation" nolabel="1" />
                        
                        <div class="o_td_label">
                            <label for="car_place_number"  style="font-weight:bold;" />
                        </div>
                        <field name="car_place_number" nolabel="1" />
                        

                        <div class="o_td_label">
                            <label for="car_usage"  style="font-weight:bold;" />
                        </div>
                        <field name="car_usage" nolabel="1" />

                    </group>
                    <group id="left_group">

                        <div class="o_td_label">
                            <label for="car_energie"  style="font-weight:bold;" />
                        </div>
                        <field name="car_energie" nolabel="1" />

                        <div class="o_td_label">
                            <label for="car_power"  style="font-weight:bold;" />
                        </div>
                        <field name="car_power" nolabel="1" />

                        <div class="o_td_label">
                            <label for="car_category"  style="font-weight:bold;" />
                        </div>
                        <field name="car_category" nolabel="1" />
                    </group>
              </group>
              <group name="conducteur" string="informations conducteur" attrs = "{'invisible': [('assurance_type','=','maladie')], 'required':[('assurance_type','=','auto' )] }">
                  <group>
                      <div class="o_td_label">
                            <label for="nom_conducteur"  style="font-weight:bold;" />
                      </div>
                        <field name="nom_conducteur" nolabel="1" />

                      <div class= "o_td_label">
                            <label for="cat_permis"  style="font-weight:bold;" />
                      </div>
                      <field name="cat_permis" nolabel="1" />

                  </group>
                  <group>
                      <div class= "o_td_label">
                            <label for="zone_tarif"  style="font-weight:bold;" />
                      </div>
                      <field name="zone_tarif" nolabel="1" />

                  </group>
              </group>
            </xpath>

            <!-- assurrance santé -->

            <xpath expr="//notebook" position="before">
                <group name="santé" string="informations de l'assuré" attrs = "{'invisible': [('assurance_type','=','auto')], 'required':[('assurance_type','=','maladie' )] }">
                    <div class="o_td_label">
                            <label for="Nom_client"  style="font-weight:bold;" />
                      </div>
                        <field name="Nom_client" nolabel="1" class= "oe_inline"/>
                    <div class="o_td_label">
                            <label for="pack"  style="font-weight:bold;" />
                      </div>
                        <field name="pack" nolabel="1"  class= "oe_inline"/>
                    <div class="o_td_label" attrs="{'invisible': [('pack','=',('individuel'))]}" >
                            <label for="Nbre_assure"  style="font-weight:bold;" />
                      </div>
                        <field name="Nbre_assure" nolabel="1"  class= "oe_inline" attrs="{'invisible': [('pack','=',('individuel'))]}"/>
                    <div class="o_td_label" attrs="{'invisible': [('pack','!=',('individuel'))]}">
                            <label for="Age"  style="font-weight:bold;"/>
                      </div>
                        <field name="Age" nolabel="1" class= "oe_inline" attrs="{'invisible': [('pack','!=',('individuel'))]}"/>
                    <div class="o_td_label" attrs="{'invisible': [('pack','!=',('individuel'))]}">
                            <label for="Nmro_CNI"  style="font-weight:bold;" />
                      </div>
                        <field name="Nmro_CNI" nolabel="1" class= "oe_inline" attrs="{'invisible': [('pack','!=',('individuel'))]}"/>
                </group>
            </xpath>
        </field> 
    </record>
    
    <record id="view_move_form_line" model="ir.ui.view">
        <field name="name">account.move.form</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref ="account.view_move_form"/>  
        <field name="arch" type="xml">
            <xpath expr ="//field[@name='invoice_line_ids']/ tree /field[@ name= 'quantity']" position="replace">
                <field name ="start_date" required="1"/> 
                <field name ="end_date" required="1"/>       
            </xpath>

            <xpath expr ="//field[@name='invoice_line_ids']/ tree /field[@ name= 'product_id']" position="replace">
                <field name="product_id" invisible="1"/>      
            </xpath>

            <xpath expr ="//field[@name='invoice_line_ids']/ tree /field[@ name= 'name']" position="replace">
                <!-- <field name="assurance_type" /> -->
                <field name="assurance_type" widget="selection" invisible="1"/>
                <field name="product_id" string="Garantie souscrite"/>
                <field name ="name" invisible="1" />
                <field name ="police" attrs = "{'invisible': [('assurance_type','=','maladie')], 'required':[('assurance_type','=','auto')] }"/>  
                <field name ="risque" attrs = "{'invisible': [('assurance_type','=','maladie')], 'required':[('assurance_type','=','auto')] }" /> 
                <!-- <field name="assurance_value" />-->
            </xpath>
            
            <!-- <xpath expr="//field[@name='amount_total']" position="after">
                <field name="assura"/>
            </xpath> -->
            

            <xpath expr ="//field[@name='invoice_line_ids']/ tree /field[@ name= 'price_unit']" position="replace">
                
                <field name ="price_unit" invisible="1"/>     
            </xpath>

            <xpath expr ="//field[@name='invoice_line_ids']/ tree /field[@ name= 'price_unit']" position="after">
                <field name="prime_net" />
                <field name ="accessoire" string="Accessoires"/>  
                <field name ="dta" string="DTA"/>  
                <field name ="autres" string="Autres"/>       
            </xpath>

            <xpath expr ="//field[@name='invoice_line_ids']/ tree /field[@ name= 'price_subtotal']" position="replace">
                
                <field name ="price_subtotal" string="Prime HT" force_save="1"/>     
            </xpath>


            <xpath expr ="//field[@name='invoice_line_ids']/ tree /field[@ name= 'product_uom_id']" position="replace">
                
                <field name ="product_uom_id" invisible="1"/>     
            </xpath>

            <xpath expr = "//field[@name='line_ids'] / tree / field [@ name = 'account_id']" position = "before" > 
                <field name ="start_date" invisible="1"/> 
                <field name ="end_date"  invisible="1"/> 
                <field name ="police"  invisible="1"/>   
                <field name ="risque" invisible="1"/>   
                <field name ="accessoire" invisible="1"/>    
                <field name ="dta" invisible="1"/>  
                <field name ="autres" invisible="1"/>  

                <field name ="prime_net" invisible="1"/>       
            </xpath>

        </field> 
    </record>



    

</odoo>
